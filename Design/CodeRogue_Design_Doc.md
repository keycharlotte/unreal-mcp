# Code Rogue: 代码深渊 - 游戏设计文档

## 目录
1. [游戏概述](#游戏概述)
2. [核心玩法](#核心玩法)
3. [游戏机制](#游戏机制)
4. [进度系统](#进度系统)
5. [技术规格](#技术规格)
6. [开发路线图](#开发路线图)

## 游戏概述

### 游戏概念
《Code Rogue: 代码深渊》是一款结合了 Roguelike 元素的打字游戏，玩家扮演一名被困在赛博空间的普通人，需要通过输入代码来战斗并逃离不断变化的数据迷宫。

### 目标用户
- 编程爱好者
- 打字游戏玩家
- Roguelike 爱好者
- 赛博朋克文化爱好者

### 视觉风格
游戏采用现代几何图形风格呈现，类似《血腥大地》的视觉效果，但保持极简主义美学。

#### 核心视觉元素：
- **几何图形**：
  - 玩家：实心圆形「●」
  - 敌人：根据类型使用不同几何图形
    - 近战：三角形「▲」
    - 远程：菱形「◆」
    - 精英：六边形「⬡」
    - Boss：八边形「⬢」

- **色彩方案**：
  - 默认：深色主题（黑底霓虹色，赛博朋克风格）
  - 可解锁主题：
    - `Neon`：霓虹色彩，高饱和度
    - `Synthwave`：复古未来风格
    - `Matrix`：黑绿配色
    - `Cyberpunk`：黄粉对比色

- **动画效果**：
  1. **几何图形动画**
     - 玩家移动时的平滑旋转
     - 受击时的缩放震动
     - 技能释放时的形状变换
     - 死亡时的瓦解消散

  2. **粒子系统**
     - 技能轨迹的流光尾迹
     - 连击提示的星星粒子
     - 伤害数字的浮动效果
     - 环境氛围的数据流

  3. **霓虹效果**
     - 角色轮廓的霓虹描边
     - 技能释放的光芒扩散
     - 护盾激活的能量波纹
     - 关键物品的脉冲闪烁

  4. **屏幕特效**
     - 受击时的方向性震动
     - 爆炸时的冲击波扭曲
     - 低血量时的红色边缘
     - 连击达到阈值的屏幕闪光

#### 界面布局：
- 主游戏区域：
  - 玩家固定在屏幕正中心
  - 敌人从四周以波状形式涌向中心
  - 动态粒子效果增强视觉冲击力
- 状态信息：半透明叠加在游戏画面四周
- 技能图标：底部工具栏
- 得分和连击：右上角

#### 界面元素：
- 主游戏区域：80x24字符网格（可缩放）
- 侧边控制台：显示状态、日志和输入提示
- 半透明叠加层：用于菜单和对话框

### 游戏特色
- 紧张刺激的打字战斗系统
- 程序生成的地牢和敌人
- 丰富的角色职业和技能树
- 深度的 Roguelike 机制
- 极简的ASCII/文本美术风格
- 可自定义的代码编辑器主题

## 关卡设计

### 主题概念与叙事
每个关卡都围绕一个独特的主题展开，通过关卡名称、环境元素和敌人设计来强化主题。关卡名称采用碎片化叙事方式，暗示游戏世界背后的故事。

#### 关卡主题示例：
1. **废弃的数据中心**
   - 主题：衰败的科技
   - 关卡名：`404: System Failure`
   - 敌人文本：`[CORRUPTED]`、`[LEGACY]`、`[DEPRECATED]`
   - 特有词缀：
     - `数据腐蚀`：敌人死亡时留下腐蚀区域
     - `过载`：周期性释放电能冲击波
     - `冗余`：部分敌人会自我复制

2. **病毒温床**
   - 主题：数字感染
   - 关卡名：`Quarantine Breach Detected`
   - 敌人文本：`[VIRUS]`、`[MALWARE]`、`[TROJAN]`

3. **防火墙领域**
   - 主题：数字防御
   - 关卡名：`Access Denied: Authorization Required`
   - 敌人文本：`[FIREWALL]`、`[ENCRYPT]`、`[AUTH]`

4. **记忆碎片**
   - 主题：数据恢复
   - 关卡名：`Memory Leak Detected`
   - 敌人文本：`[FORGOTTEN]`、`[FRAGMENT]`、`[CORRUPT]`

5. **核心处理器**
   - 主题：系统核心
   - 关卡名：`Critical System Override`
   - 敌人文本：`[CORE]`、`[THREAD]`、`[PROCESS]`

### 敌人文本设计原则
- 每个关卡的敌人文本必须与其主题高度相关
- 文本应简洁有力，通常为1-3个大写单词
- 使用方括号`[]`包裹文本以增强数字感
- 随着关卡深入，文本可以组合或变形（如`[FIREWALL]` → `[F1R3W4LL]`）

### 碎片化叙事实现
- 通过关卡名称暗示更大的故事背景
- 环境细节（如终端日志、损坏的显示屏）提供额外线索
- 击败Boss后解锁的终端记录揭示更多背景故事

## 核心玩法

### 游戏循环
1. **探索阶段**
   - 在程序生成的地牢中移动
   - 发现宝藏和升级
   - 遭遇随机事件

2. **战斗阶段**
   - 实时输入代码片段与敌人战斗
   - 使用特殊技能和连击系统
   - 管理资源和冷却时间

3. **升级阶段**
   - 选择升级和技能
   - 装备新物品
   - 准备下一层挑战

### 控制方式
- **WASD/方向键**：移动角色
- **键盘输入**：输入代码进行攻击
- **数字键**：使用技能
- **空格键**：确认/互动
- **ESC**：打开菜单

## 游戏机制

### 1. 代币与成长系统

#### 代币类型
- **数据碎片 (Data Fragments)**
  - 基础代币，通过完成关卡获得
  - 用于解锁基础技能和升级
  
- **核心晶体 (Core Crystals)**
  - 稀有代币，通过完成挑战和成就获得
  - 用于解锁高级技能和特殊能力

- **远古代码 (Ancient Code)**
  - 传奇代币，通过击败Boss和完成特殊任务获得
  - 用于解锁终极技能和外观

#### 关卡结算奖励
- **基础奖励**
  - 完成关卡：100-300 数据碎片
  - 首次通关：额外 100 数据碎片 + 1 核心晶体
  - 难度加成：每提升一个难度等级，奖励增加 50%

- **表现奖励**
  - 连击数奖励：每10连击 +10 数据碎片
  - 无伤通关：奖励翻倍
  - 时间奖励：在目标时间内完成获得额外奖励

- **成就奖励**
  - 完成特定挑战获得核心晶体
  - 收集隐藏物品获得远古代码

### 2. 技能树系统

#### 基础技能树
- **攻击系**
  - 提升基础伤害
  - 增加暴击率
  - 解锁新攻击模式

- **防御系**
  - 增加最大生命值
  - 提升护盾效果
  - 获得伤害减免

- **技巧系**
  - 增加移动速度
  - 减少技能冷却
  - 提升连击窗口时间

#### 职业专精
- **黑客 (Hacker)**
  - 技能：病毒注入、系统入侵、数据窃取
  - 特点：高爆发，低生存

- **守护者 (Guardian)**
  - 技能：能量护盾、系统修复、防火墙
  - 特点：高防御，团队支援

- **游侠 (Ranger)**
  - 技能：快速射击、闪避、弱点打击
  - 特点：高机动，持续输出

### 3. 局外成长系统

#### 永久升级
- **核心升级**
  - 增加基础属性（生命、攻击、防御）
  - 提升代币获取率
  - 解锁新的游戏机制

- **收藏品**
  - 收集数据碎片解锁背景故事
  - 解锁新的角色外观
  - 获取特殊头衔和成就

#### 赛季系统
- 每赛季持续约3个月
- 提供独特的赛季奖励
- 重置部分进度以保持新鲜感

### 4. 商店与经济平衡

#### 商店系统
- 每日刷新随机商品
- 使用代币购买技能和升级
- 限时特惠和捆绑包

#### 经济平衡
- 确保玩家在合理时间内获得核心升级
- 高级内容需要投入时间或技巧
- 防止过度刷取和资源溢出

## 游戏机制

### 1. 怪物系统

#### 怪物生成机制
- **刷新规则**：
  - 怪物从屏幕四周的随机出生点刷新
  - 出生点距离屏幕边缘固定距离
  - 刷新波次制，每波怪物数量随进度增加
  - 每波结束后有短暂休息时间

- **移动行为**：
  - 所有怪物生成后自动朝屏幕中心移动
  - 移动速度根据怪物类型而定
  - 遇到障碍物会尝试绕行

#### 怪物类型
1. **小兵类**
   - **近战小兵**
     - 生命值：低
     - 伤害：中
     - 移动速度：快
     - 攻击方式：接触造成伤害
     - 特殊：无

   - **远程小兵**
     - 生命值：低
     - 伤害：中
     - 移动速度：中
     - 攻击方式：远程投射物
     - 特殊：保持一定距离攻击

2. **精英怪**
   - **护盾精英**
     - 生命值：高
     - 护盾值：中（可恢复）
     - 伤害：高
     - 移动速度：中
     - 特殊：
       - 护盾存在时减少50%受到的伤害
       - 护shield被打破后进入短暂虚弱状态
       - 脱离战斗后护盾会缓慢恢复

3. **Boss - 三位一体**
   - **核心机制**：
     - 由3个独立单位组成
     - 每个单位共享生命值
     - 需要同时击败3个单位才能完全消灭
   - **单位特性**：
     1. **攻击单位**
        - 高伤害，低生命值
        - 会主动追击玩家
     2. **防御单位**
        - 高生命值，低伤害
        - 会保护其他单位
     3. **辅助单位**
        - 中等生命值
        - 会治疗其他单位
   - **特殊机制**：
     - 当任意一个单位死亡时，其他单位会进入狂暴状态
     - 狂暴状态：攻击速度和移动速度提升30%

#### 怪物属性成长
- 随游戏进度提升：
  - 基础生命值提升
  - 基础伤害提升
  - 特殊能力增强
  - 出现更高级怪物的概率增加

### 2. 打字战斗系统

### 1. 技能卡牌库与轨道系统

#### 卡牌库机制
- 每个角色拥有一个技能卡牌库，初始容量为8张卡牌
- 卡牌库中的卡牌会按顺序自动进入技能轨道
- 卡牌使用后会回到牌库底部，形成循环
- 可以通过天赋和装备扩展卡牌库容量（没有最大数量限制）

#### 轨道机制
- 每个角色初始拥有2个技能轨道
- 最多可解锁至4个技能轨道（通过天赋或装备）
- 只有当前在轨道上的技能卡牌才能获得充能
- 卡牌自动轮换：
  - 当一张卡牌被使用后，自动从卡牌库中抽取下一张卡牌进入该轨道
  - 卡牌抽取遵循先进先出（FIFO）原则
  - 可以预览接下来几张将进入轨道的卡牌

#### 能量分配
1. **基础充能**
   - 每次成功输入一个字符：每个激活轨道获得1点能量
   - 连击数达到特定阈值时，充能效率提升

2. **自动充能**
   - 基础值：每个轨道0.5点/秒
   - 可通过天赋和装备提升
   - 不受连击数影响

3. **能量分配策略**
   - **平均分配**：能量平均分配给所有激活轨道
   - **优先充能**：可设置某个轨道优先获得能量
   - **智能分配**：根据当前战斗情况自动调整能量分配

#### 技能释放与轮换
- 当某个轨道的能量达到技能卡牌消耗时，自动释放该技能
- 技能释放后：
  1. 该轨道能量清空
  2. 已使用的卡牌回到卡牌库底部
  3. 从卡牌库顶部抽取一张新卡牌进入该轨道
  4. 开始新一轮充能
- 卡牌轮换策略：
  - 基础：按卡牌库顺序轮换
  - 高级：可以通过天赋解锁特殊轮换规则（如：跳过、保留、复制等）
- 可以手动设置是否自动释放技能，或需要手动确认

### 2. 打字战斗系统

#### 普通攻击（打字）
- 输入屏幕上显示的单词或代码片段
- 每次成功输入：
  - 造成基础伤害
  - 获得1点能量
  - 增加1点连击数
- 连击奖励：
  - 10连击：伤害+10%，充能效率+10%
  - 30连击：伤害+20%，充能效率+20%
  - 50连击：伤害+30%，充能效率+30%

#### 技能系统
每张技能卡牌需要消耗特定数量的能量才能使用：

| 技能名称 | 类型 | 消耗能量 | 描述 | 冷却时间 |
|---------|------|---------|------|---------|
| 代码风暴 | 攻击 | 30 | 对单个敌人造成200%攻击力的伤害 | 8s |
| 数据护盾 | 防御 | 25 | 生成相当于最大生命值30%的护盾 | 12s |
| 系统超频 | 增益 | 40 | 10秒内打字速度提升30% | 20s |
| 漏洞修复 | 恢复 | 35 | 恢复15%最大生命值 | 15s |
| 数据洪流 | 终极 | 100 | 对全体敌人造成150%攻击力的伤害 | 30s |

#### 能量管理策略
1. **爆发输出**：积攒能量后连续使用高伤害技能
2. **持续作战**：平衡使用技能和普通攻击，维持能量稳定
3. **紧急防御**：保留部分能量用于防御和恢复技能

#### 连击系统
- 连击数越高，伤害倍率越高
- 错误输入会重置连击数
- 特殊连击奖励（如10连击、50连击等）

### 2. Roguelike 元素

#### 程序生成
- 随机生成的地牢布局
- 多样化的敌人组合
- 随机事件和遭遇

#### 永久死亡
- 角色死亡后重新开始
- 保留部分进度和解锁内容
- 每次游戏体验都不同

### 3. 角色系统

#### 初始天赋
每个角色拥有一个独特的初始天赋，决定其基础定位和玩法风格：

1. **代码专家**
   - 初始卡牌库（8张）：
     1. 代码风暴（攻击）
     2. 数据过载（攻击+易伤）
     3. 系统优化（增益）
     4. 漏洞扫描（控制）
     5. 代码重构（AOE）
     6. 数据备份（防御）
     7. 系统重启（恢复）
     8. 终极编译（终极技能）
   - 天赋：每3次技能攻击后，下一次技能伤害提升50%
   - 卡牌特性：
     - 攻击类卡牌充能速度+20%
     - 卡牌库容量+1（初始特性）
   - 解锁特性：
     - 初始解锁第3个轨道（其他角色需要达到5级解锁）
     - 10级后解锁卡牌预读（可预览下3张卡牌）

2. **系统守护者**
   - 初始卡牌：数据护盾（生成吸收伤害的护盾）
   - 天赋：护盾被击破时，恢复10%最大生命值

3. **架构大师**
   - 初始卡牌：部署炮台（召唤一个自动攻击的炮台）
   - 天赋：场上每有一个召唤物，所有召唤物伤害提升10%

#### 卡牌品质与消耗
- **普通**（1点）：基础效果
- **稀有**（2点）：强化效果，额外特性
- **史诗**（3点）：强力效果，多个特性组合
- **传说**（4点）：改变游戏玩法的强大效果

### 4. 灵魂链接系统

#### 链接机制
- 每个角色可以链接1个其他角色作为灵魂伴侣
- 链接的角色不会直接参与战斗
- 主战角色继承链接角色的初始天赋
- 链接效果：主战角色获得链接角色30%的基础属性加成

#### 链接特性
- **共鸣效果**：当主战角色和链接角色的职业相同时，激活特殊共鸣效果
- **羁绊加成**：链接角色的羁绊特性有20%的效果会加成给主战角色
- **紧急支援**：当主战角色生命值低于20%时，链接角色有概率触发一次救援技能

#### 链接策略
1. **天赋互补**：选择与主战角色天赋互补的链接对象
2. **属性强化**：选择高属性角色作为链接对象，提升基础能力
3. **羁绊协同**：选择能激活额外羁绊效果的链接对象

### 5. 熟练度系统

#### 角色熟练度
- 每个角色独立计算熟练度
- 使用角色完成战斗获得熟练度经验
- 熟练度提升后解锁以下内容：
  - 新卡牌解锁
  - 天赋强化
  - 外观奖励

#### 熟练度等级
1. **新手**（0-999经验）
   - 解锁基础卡牌
   - 初始天赋效果+10%

2. **熟练**（1000-4999经验）
   - 解锁稀有卡牌
   - 初始天赋效果+25%
   - 解锁第一个天赋强化选项

3. **专家**（5000-14999经验）
   - 解锁史诗卡牌
   - 初始天赋效果+50%
   - 解锁第二个天赋强化选项

4. **大师**（15000+经验）
   - 解锁传说卡牌
   - 初始天赋效果+100%
   - 解锁独特外观和特效

### 卡牌构筑系统

#### 技能轨道管理
- **轨道解锁**：
  - 初始：2个轨道
  - 5级：解锁第3个轨道
  - 15级：解锁第4个轨道（需天赋支持）
- **轨道特性**：
  - 每个轨道可装备特定类型的技能卡牌
  - 可以设置轨道优先级（充能权重）
  - 可随时在非战斗状态调整轨道配置

### 卡牌获取与升级
- 每场战斗后获得卡牌三选一机会
- 相同卡牌可以合并升级，提升效果和品质
- 卡牌槽位随角色等级提升而增加（初始3个，最多6个）

### 羁绊系统（卡牌特性）
每张卡牌拥有1-2个羁绊特性，激活特定组合获得额外效果：

#### 1. 职业特性
- **代码专家** (2/4/6)
  - 2张：技能伤害+15%
  - 4张：技能暴击率+20%
  - 6张：技能暴击伤害+50%

- **系统守护** (2/4/6)
  - 2张：获得10%最大生命值的护盾
  - 4张：护盾存在时，伤害减免15%
  - 6张：护盾被打破时，对周围敌人造成最大生命值20%的伤害

- **召唤大师** (2/4)
  - 2张：召唤物生命值和伤害+30%
  - 4张：可以多召唤1个召唤物

#### 2. 元素特性
- **火焰** (2/4)
  - 2张：攻击有20%几率造成灼烧效果
  - 4张：灼烧效果可以叠加3层

- **冰霜** (2/4)
  - 2张：攻击有15%几率冻结敌人1秒
  - 4张：冻结时间延长至2秒，且冻结敌人时恢复5%最大生命值

- **闪电** (2/4)
  - 2张：攻击有25%几率弹射到1个额外目标
  - 4张：弹射伤害提升至80%

### 卡牌构筑策略
1. **纯职业流**：专注于单一职业特性，快速激活高级效果
2. **元素混搭流**：组合不同元素特性，获得多样化的战斗风格
3. **均衡发展**：平衡职业和元素特性，应对各种战斗情况

### 卡牌升级系统
- 每张卡牌可以通过消耗相同卡牌进行升级
- 升级提升基础效果和附加属性
- 最高可升级至5星，每次升级都有质的飞跃

## 进度系统

#### 第三阶段：数值深度挖掘
- **核心玩法**：
  - 开启"深渊模式"无尽关卡
  - 打字伤害占比降至20%
  - 自动充能速度可达5点/秒
- **终局内容**：
  - 角色专精系统（30级解锁）
  - 传奇装备词条组合
  - 赛季排行榜竞争
- **数值设计**：
  - 每层敌人生命值+7%
  - 角色成长曲线优化
  - 极限build验证
  - 解锁新角色和起始装备
  - 提升基础属性（生命值、伤害等）
  - 解锁新技能和天赋

### 成就系统
- 完成特定挑战获得成就
- 奖励独特称号和外观
- 展示在玩家档案中

## 技术规格

### 开发环境
- **引擎**：Unreal Engine 5.5.4
- **编程语言**：C++ 和蓝图
- **目标平台**：Windows (Steam)

### 美术风格
- 赛博朋克风格
- 低多边形3D模型
- 霓虹灯效果和全息UI

### 音效与音乐系统

#### 音效设计
1. **打字音效**
   - 基础按键音：模拟机械键盘的清脆声音
   - 连击音效：随连击数增加音调和音量
   - 错误输入：独特的警告音

2. **战斗音效**
   - 技能释放：每个技能独特的音效
   - 伤害反馈：击中和受伤音效
   - 连击奖励：达到特定连击数时的特殊音效

3. **环境音效**
   - 背景环境：电子设备运行声
   - 空间音效：根据场景变化的环境音
   - 特殊事件：如Boss出现时的警报声

#### 音乐系统
1. **背景音乐**
   - 主题曲：赛博朋克风格电子音乐
   - 战斗曲：节奏加快的动感电子乐
   - Boss战：史诗级电子配乐

2. **动态音乐系统**
   - 根据战斗强度调整音乐节奏
   - 在关键时刻无缝切换音乐
   - 支持音乐淡入淡出效果

#### 音频引擎特性
- 3D空间音频
- 动态混音系统
- 音效音量独立调节
- 支持自定义音效包

## 开发路线图

### 阶段1：核心原型 (3-4周)
- **输入与显示系统**
  - [ ] ASCII/Unicode字符渲染引擎
  - [ ] 键盘输入处理系统
  - [ ] 文本动画效果（闪烁、渐变等）
  - [ ] 多主题支持（深色/浅色主题）

- **游戏基础**
  - [ ] 角色移动与碰撞系统
  - [ ] 基础敌人AI与行为树
  - [ ] 打字战斗系统核心逻辑
  - [ ] 简单的关卡布局生成

### 阶段2：核心玩法 (5-7周)
- **战斗系统**
  - [ ] 敌人词库与生成系统
  - [ ] 连击与评分系统
  - [ ] 特殊技能与能力系统
  - [ ] 敌人攻击模式与行为

- **进度系统**
  - [ ] 角色升级与属性系统
  - [ ] 技能树与天赋系统
  - [ ] 成就与挑战系统
  - [ ] 本地存档系统

### 阶段3：内容制作 (6-8周)
- **关卡设计**
  - [ ] 5个主题关卡（数据中心、病毒温床等）
  - [ ] 程序化地牢生成算法
  - [ ] 关卡特定的敌人行为
  - [ ] Boss战设计与实现

- **内容扩展**
  - [ ] 30+敌人类型与词库
  - [ ] 20+技能与能力
  - [ ] 碎片化叙事内容
  - [ ] 音效与背景音乐

### 阶段4：成长系统实现 (4-6周)
- **代币系统**
  - [ ] 代币获取与消费逻辑
  - [ ] 结算界面与奖励发放
  - [ ] 商店UI与购买功能
  - [ ] 数据持久化存储

- **技能树系统**
  - [ ] 技能树UI与交互
  - [ ] 技能效果实现
  - [ ] 职业专精系统
  - [ ] 技能解锁与升级逻辑

- **平衡与优化**
  - [ ] 经济系统平衡
  - [ ] 技能效果调整
  - [ ] 性能优化与测试
  - [ ] 游戏测试与平衡调整
  - [ ] 宣传素材准备
  - [ ] 发布到Steam平台

### 阶段4：优化和发布 (4周)
- [ ] 性能优化
- [ ] 平衡性调整
- [ ] Beta测试
- [ ] 发布准备

---
*最后更新: 2025-05-21

## 科技解构奇幻

### 1. 魔法系统
- **能量来源**：暗物质转换器（DMT-2000）
  - 法术效果：通过量子纠缠实现能量定向释放
  - 咒语本质：声控操作指令（如"Fireball"对应指令码`0xFA12B`）
- **魔法阵**：纳米级电路蚀刻，形成能量导流网络

### 2. 种族设定
| 奇幻种族 | 科技解构版本 | 技术原理 |
|---------|--------------|---------|
| 吸血鬼 | 基因改造体 | 逆转录病毒导致的嗜血细胞变异 |
| 狼人 | 生物兵器 | 月球周期触发的基因表达切换 |
| 精灵 | 新人类亚种 | 光合作用皮肤与神经加速改造 |

### 3. 经典物品重诠释
- **圣剑Excalibur**：
  - 等离子体约束刃（温度：5000K）
  - 内置AI战斗辅助系统
- **魔法水晶球**：
  - 量子计算机终端
  - 支持多维数据可视化

### 4. 副本设计案例
1. **机械圣殿（原：法师塔）**
   - 敌人：
     - `[AUTO-TURRET]` 自动防御炮台
     - `[NANO-SWARM]` 纳米机械集群
   - Boss：`[ARCHMAGE-9000]`（搭载量子核心的AI法师）

2. **基因实验室（原：吸血鬼城堡）**
   - 场景：培养舱、DNA编辑终端
   - 机制：血液样本收集→基因锁破解

### 叙事线索
- 所有"魔法现象"都是前文明遗留的超级科技
- 玩家逐步发现这个世界是某个文明的"科技考古模拟器"
- 最终揭示奇幻与科技的辩证关系：
  > "足够先进的科技，初看便如同魔法"
